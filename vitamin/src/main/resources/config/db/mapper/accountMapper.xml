<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 매퍼 연결 -->
<mapper namespace="kr.co.vitamin.repository.mapper.AccountMapper">
	<resultMap type="member" id="memberMap">
		<result column="member_no" property="memberNo" />
		<result column="id" property="id" />
		<result column="pwd" property="pwd" />
		<result column="name" property="name" />
		<result column="email" property="email" />
		<result column="phone_number" property="phoneNumber" />
		<result column="address_no" property="addressNo" />
		<result column="birth_date" property="birthDate" />
		<result column="gender" property="gender" />
		<result column="email_token_no" property="emailTokenNo" />
		<result column="member_type" property="memberType" />
		<result column="reg_date" property="regDate" />
		<result column="email_token_status" property="emailTokenStatus" />
	</resultMap>
	
	<select id="selectOverlapIdCheck" resultMap="memberMap" parameterType="member">
		SELECT id FROM vi_member
		WHERE id=#{id} LIMIT 1
	</select>
	
	<insert id="insertMember" parameterType="member">
		INSERT INTO vi_member
		(id, pwd, name, email, phone_number, address_no, birth_date, gender, email_token_no, member_type, email_token_status)
		VALUES
		(#{id}, #{pwd}, #{name}, #{email}, #{phoneNumber}, #{addressNo}, #{birthDate}, #{gender}, #{emailTokenNo}, #{memberType}, #{emailTokenStatus})
	</insert>
	
	<update id="updateEmailToken" parameterType="member">
		UPDATE vi_member SET
		email_token_status = #{emailTokenStatus}, email_token_no = null
		WHERE email_token_no = #{emailTokenNo}
		LIMIT 1
	</update>
	
	<select id="selectLoginMember" parameterType="member" resultMap="memberMap">
		SELECT * FROM vi_member
		WHERE id=#{id} AND pwd=#{pwd}
	</select>
</mapper>